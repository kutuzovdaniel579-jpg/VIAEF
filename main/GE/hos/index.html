<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8">
  <title>VIÆF – Aardrijkskunde</title>
  <style>
    body { font-family: system-ui, sans-serif; background:#0b1020; color:#f5f5f5; padding:20px; }
    select, button { padding:6px 10px; margin:4px; border-radius:6px; border:none; }
    button { background:#4f46e5; color:white; cursor:pointer; }
    button:hover { background:#6366f1; }
    .card { background:rgba(255,255,255,0.06); border-radius:12px; padding:16px 20px; margin-top:16px; backdrop-filter:blur(16px); }
  </style>
</head>
<body>
  <h1>Aardrijkskunde – Hoofdsteden</h1>

  <div>
    <label><strong>Dataset:</strong></label>
    <select id="datasetSelect">
      <option value="landen">Landen</option>
      <option value="microstaten">Microstaten</option>
    </select>

    <label><strong>Moeilijkheid:</strong></label>
    <select id="difficultySelect">
      <option>Baby</option>
      <option>Easy</option>
      <option>Normal</option>
      <option>Hardcore</option>
      <option>Insane</option>
      <option>Nerd</option>
    </select>

    <span id="microDefWrapper" style="display:none;">
      <label><strong>Definitie:</strong></label>
      <select id="microDefSelect">
        <option value="VN">VN</option>
        <option value="Uitgebreid">Uitgebreid</option>
        <option value="Maximaal">Maximaal</option>
      </select>
    </span>

    <button id="newQuestionBtn">Nieuwe vraag</button>
  </div>

  <div class="card" id="questionCard" style="display:none;">
    <div id="questionText"></div>
    <button id="showAnswerBtn">Toon antwoord</button>
    <div id="answerText" style="margin-top:8px; font-weight:bold; display:none;"></div>
  </div>

  <script>
    const LANDEN_URL = "https://kutuzovdaniel579-jpg.github.io/VIAEF/GE/landen.json";
    const MICRO_URL  = "https://kutuzovdaniel579-jpg.github.io/VIAEF/GE/Microstaten.json";

    let landenData = null;
    let microData  = null;

    async function loadData() {
      const [landenRes, microRes] = await Promise.all([
        fetch(LANDEN_URL),
        fetch(MICRO_URL)
      ]);
      landenData = await landenRes.json();
      microData  = await microRes.json();
    }

    function getRandomEntry(obj) {
      const keys = Object.keys(obj);
      if (keys.length === 0) return null;
      const land = keys[Math.floor(Math.random() * keys.length)];
      return { land, hoofdstad: obj[land] };
    }

    function newQuestion() {
      const dataset = document.getElementById("datasetSelect").value;
      const diff    = document.getElementById("difficultySelect").value;

      let entry = null;

      if (dataset === "landen") {
        const pool = landenData?.[diff];
        if (!pool) return;
        entry = getRandomEntry(pool);
      } else {
        const def = document.getElementById("microDefSelect").value;
        const pool = microData?.[def]?.[diff];
        if (!pool) return;
        entry = getRandomEntry(pool);
      }

      if (!entry) return;

      const qCard   = document.getElementById("questionCard");
      const qText   = document.getElementById("questionText");
      const aText   = document.getElementById("answerText");
      const aButton = document.getElementById("showAnswerBtn");

      qText.textContent = `Wat is de hoofdstad van ${entry.land}?`;
      aText.textContent = entry.hoofdstad;
      aText.style.display = "none";
      qCard.style.display = "block";

      aButton.onclick = () => {
        aText.style.display = "block";
      };
    }

    document.getElementById("datasetSelect").addEventListener("change", (e) => {
      const isMicro = e.target.value === "microstaten";
      document.getElementById("microDefWrapper").style.display = isMicro ? "inline-block" : "none";
    });

    document.getElementById("newQuestionBtn").addEventListener("click", () => {
      if (!landenData || !microData) return;
      newQuestion();
    });

    // init
    loadData().catch(console.error);
  </script>
</body>
</html>
